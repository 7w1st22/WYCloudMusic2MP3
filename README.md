# 网易云音乐ncm文件转MP3/flac

![image-20241220112502832](./img/image-20241220112502832.png)

## 添加了文件存在校验，具体执行过程：

1. 遍历目标文件夹中的每个文件：

   - 对每个文件逐一计算哈希值。
   - 将文件的路径（或文件名）作为键，哈希值作为值，存储在字典 `existing_hashes` 中。

2. `existing_hashes` 的结构：

   - 假设目标文件夹中有多个文件，每个文件都计算自己的哈希值，存储结果如下：

     ```python
     existing_hashes = {
         'file1.mp3': 'd41d8cd98f00b204e9800998ecf8427e',  # 哈希值
         'file2.flac': 'e4d909c290d0fb1ca068ffaddf22cbd0',
         ...
     }
     ```

3. 检查重复时：

   - 对生成的临时文件计算哈希值。
   - 与 `existing_hashes` 中的值逐一对比，如果发现相同哈希值，就认为文件内容完全一致，并跳过保存。

## 添加了指定目录，对该目录下所有ncm文件解密

## 添加了对非ncm文件的忽略